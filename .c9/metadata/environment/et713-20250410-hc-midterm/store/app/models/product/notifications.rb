{"filter":false,"title":"notifications.rb","tooltip":"/et713-20250410-hc-midterm/store/app/models/product/notifications.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":17,"column":3},"action":"insert","lines":["module Product::Notifications","  extend ActiveSupport::Concern","","  included do","    has_many :subscribers, dependent: :destroy","    after_update_commit :notify_subscribers, if: :back_in_stock?","  end","","  def back_in_stock?","    inventory_count_previously_was == 0 && inventory_count > 0","  end","","  def notify_subscribers","    subscribers.each do |subscriber|","      ProductMailer.with(product: self, subscriber: subscriber).in_stock.deliver_later","    end","  end","end"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":17,"column":3},"end":{"row":17,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1745283839443,"hash":"cb7e1450ee823d585c036129062e920ee2cfb8af"}